<!doctype html>
<html lang="en">
    <head th:replace="~{fragment :: head('Product Form')}"></head>
    <script type="text/javascript" src="/js/jsDetalhe.js"></script>
    <script type="text/javascript">
        function addCarrinho(){
           let link = document.getElementById("addCarrinho");
           let id = document.getElementById("prodId").value;
           let qtd = document.getElementById("qtd").value;
           link.href="../../../../adicionar/carrinho/"+id+"/"+qtd+"/add";
        }
        
        function quantidade(){
            let qtd = document.getElementById("qtd");
            if(qtd.value < 1){
                qtd.value = 1;
            }
        }
    </script>
    <body> 
        <header th:replace="~{fragment :: header}"></header> 
        <section>   
            <div class="card-group mt-3 mb-4">

                <div class="card border-light">

                    <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-indicators">
                            <div id="t">
                            </div>
                        </div>
                        <div class="carousel-inner">
                            <div th:each = "img,iterStat :${imagem}" th:classappend="${iterStat.first}? 'active'" class="carousel-item">
                                <img th:src="@{/imagem/{imagem}(imagem = ${img.img})}" class="d-block w-100 lImg" alt="...">
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
                            <span aria-hidden="true"></span>
                            <span class="carousel-controler"><</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
                            <span aria-hidden="true"></span>
                            <span class="carousel-controler">></span>
                        </button>
                    </div>

                </div>

                <div class="card border-light">                  
                    <div class="card-body">                
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item"> <h4 th:text="${prod.nomeProduto}"></h4></li>
                            <li class="list-group-item" th:text="${prod.descricao}"></li>
                            <li class="list-group-item" th:text="'Valor: R$ ' + ${prod.valor}"></li>

                            <li class="list-group-item mt-4">
                                <span>Qauntidade:</span>
                                <input type="number" value="1" id='qtd' onblur="quantidade()" class=" col-md-3 ml-4" placeholder="un" minlength="1" required>
                            </li>


                        </ul>

                    </div>


                    <a class="btn btn-dark col-md-12" id='addCarrinho' onclick="addCarrinho()">Adicionar Carrinho</a><br>
                    <a class="btn btn-dark col-md-12" href="javascript:history.back()">VOLTAR</a>
                    <input id="prodId" type="text" class="hidden" th:value='${prod.id}'>
                </div>
            </div>
        </section>
        <input id="maxV" type="type"class="hidden" th:value='${tamanho}'>
        
    </body>
</html>